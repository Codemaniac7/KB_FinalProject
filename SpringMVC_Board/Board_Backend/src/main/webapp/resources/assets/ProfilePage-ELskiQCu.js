import{b as g,a as w,c,r as y,d as x,j as k,o as u,e as p,f as a,h as s,t as f,w as d,v as m,g as V,k as N,l as S,i as P}from"./index-tRvG9TKO.js";import{a as B}from"./authApi-C8N7fbr2.js";import"./index-CIWsHD15.js";const C={class:"mt-5 mx-auto",style:{width:"500px"}},U=a("h1",null,[a("i",{class:"fa-solid fa-user-gear my-3"}),s(" 회원 정보")],-1),j={class:"mb-3 mt-3"},A=["src"],D={class:"mb-3 mt-3"},E=a("label",{for:"avatar",class:"form-label"},[a("i",{class:"fa-solid fa-user-astronaut"}),s(" 아바타 이미지: ")],-1),M={class:"mb-3 mt-3"},T=a("label",{for:"name",class:"form-label"},[a("i",{class:"fa-solid fa-circle-user"}),s(" name ")],-1),R={class:"mb-3 mt-3"},$=a("label",{for:"email",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),s(" email ")],-1),q={class:"mb-3"},z=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),s(" 비밀번호: ")],-1),F={key:0,class:"text-danger"},G={class:"text-center"},H=["disabled"],I=a("i",{class:"fa-solid fa-user-plus"},null,-1),J=a("i",{class:"fa-solid fa-lock"},null,-1),W={__name:"ProfilePage",setup(K){const t=g();w();const r=c(null),_=c(`/api/member/${t.id}/avatar`),e=y({id:t.id,name:t.name,email:t.email,password:"",avatar:null}),i=c(""),v=x(()=>!e.email||!e.password),h=async()=>{if(r.value.files.length>0&&(e.avatar=r.value.files[0]),console.log(t),!!confirm("수정하시겠습니까?"))try{await B.update(e),i.value="",t.changeProfile(e),alert("정보를 수정하였습니다."),window.location.reload()}catch(n){console.log(n),i.value=n.response.data}};return(n,o)=>{const b=k("router-link");return u(),p("div",C,[U,a("form",{onSubmit:P(h,["prevent"])},[a("div",j,[a("img",{src:_.value,class:"avatar avatar-lg me-4"},null,8,A),s(" "+f(e.id),1)]),a("div",D,[E,a("input",{type:"file",class:"form-control",ref_key:"avatar",ref:r,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a("div",M,[T,d(a("input",{type:"text",class:"form-control",placeholder:"Name",id:"name","onUpdate:modelValue":o[0]||(o[0]=l=>e.name=l)},null,512),[[m,e.name]])]),a("div",R,[$,d(a("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":o[1]||(o[1]=l=>e.email=l)},null,512),[[m,e.email]])]),a("div",q,[z,d(a("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":o[2]||(o[2]=l=>e.password=l)},null,512),[[m,e.password]])]),i.value?(u(),p("div",F,f(i.value),1)):V("",!0),a("div",G,[a("button",{type:"submit",class:"btn btn-primary mt-4 me-3",disabled:v.value},[I,s(" 확인 ")],8,H),N(b,{class:"btn btn-primary mt-4",to:"/auth/changepassword"},{default:S(()=>[J,s(" 비밀번호 변경 ")]),_:1})])],32)])}}};export{W as default};
