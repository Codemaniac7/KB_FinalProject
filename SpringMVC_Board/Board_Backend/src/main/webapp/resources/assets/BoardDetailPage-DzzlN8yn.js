import{_ as N,b as A,u as B,a as F,c as y,o as c,e as r,f as t,t as o,h as d,x as b,F as f,p as k,g as w,w as L,v as M,z as S,A as V}from"./index-BunKZIph.js";import{b as v}from"./boardApi-BvWyza9N.js";import{h as g}from"./moment-C5S46NFB.js";import"./index-D4xXOV2W.js";const E=async i=>{try{const a=document.createElement("a");a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(a){console.error(a)}},n=i=>(S("data-v-192c6d2a"),i=i(),V(),i),T={class:"my-3 d-flex justify-content-between"},$=n(()=>t("i",{class:"fa-solid fa-user"},null,-1)),j=n(()=>t("i",{class:"fa-regular fa-clock"},null,-1)),H=n(()=>t("hr",null,null,-1)),P={class:"text-end"},U=["onClick"],z=n(()=>t("i",{class:"fa-solid fa-paperclip"},null,-1)),O={class:"content"},G={class:"my-5"},J=n(()=>t("i",{class:"fa-solid fa-list"},null,-1)),K=n(()=>t("i",{class:"fa-regular fa-pen-to-square"},null,-1)),Q=n(()=>t("i",{class:"fa-solid fa-trash-can"},null,-1)),W={class:"row mt-2"},X={class:"col-11"},Z=n(()=>t("label",{class:"form-label"},"댓글",-1)),tt={class:"col-1"},et=n(()=>t("label",{class:"form-label"},[d("   "),t("span",{class:"text-body-secondary"})],-1)),st={class:"table table-striped mt-4"},ot=n(()=>t("thead",null,[t("tr",null,[t("th",{style:{width:"60px"}},"No"),t("th",null,"댓글 내용"),t("th",{style:{width:"150px"}},"작성자"),t("th",{style:{width:"120px"}},"작성일"),t("th",{style:{width:"80px"}})])],-1)),at={key:0},lt=["onClick"],nt={__name:"BoardDetailPage",setup(i){const a=A(),_=B(),h=F(),u=_.params.no,l=y({}),p=y(""),x=()=>{h.push({name:"board/list",query:_.query})},C=()=>{h.push({name:"board/update",params:{no:u},query:_.query})},D=async m=>{const s="/api/board/download/"+m;console.log(s),await E(s)},I=async()=>{confirm("삭제할까요?")&&(await v.delete(u),h.push({name:"board/list",query:_.query}))};(async()=>{l.value=await v.get(u),console.log("DETAIL",l.value)})();const Y=async()=>{if(p.value==null||p.value.length==0){alert("내용이 없습니다.");return}const m={bno:u,content:p.value,writer:a.id},s=await v.sendReply(m);console.log(s),s!=null?(alert("댓글이 등록 되었습니다."),h.push({name:"/board/detail/",params:{no:u}})):alert("댓글 등록에 실패 하였습니다.")},q=async m=>{const s=await v.deleteReply(m);console.log(s),s!=null?(alert("댓글이 삭제 되었습니다."),h.push("/board/detail/"+u)):alert("댓글 삭제에 실패 하였습니다.")};return(m,s)=>(c(),r(f,null,[t("h1",null,o(l.value.title),1),t("div",T,[t("div",null,[$,d(" "+o(l.value.memberName)+" ("+o(l.value.memberId)+") ",1)]),t("div",null,[j,d(" "+o(b(g)(l.value.updateDate).format("YYYY-MM-DD HH:mm")),1)])]),H,t("div",P,[(c(!0),r(f,null,k(l.value.boardAttachFileList,e=>(c(),r("div",{key:e.fno,class:"attach"},[t("span",{onClick:R=>D(e.fno)},[z,d(" "+o(e.originalFilename),1)],8,U)]))),128))]),t("div",O,o(l.value.content),1),t("div",G,[t("button",{class:"btn btn-primary me-2",onClick:x},[J,d(" 목록")]),b(a).id==l.value.memberId?(c(),r(f,{key:0},[t("button",{class:"btn btn-primary me-2",onClick:C},[K,d(" 수정")]),t("button",{class:"btn btn-danger",onClick:I},[Q,d(" 삭제")])],64)):w("",!0)]),t("div",W,[t("div",X,[Z,L(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e),type:"text",class:"form-control",placeholder:"내용을 입력하세요."},null,512),[[M,p.value]])]),t("div",tt,[et,t("button",{class:"form-control btn btn-primary",onClick:s[1]||(s[1]=e=>Y())},"작성")])]),t("table",st,[ot,t("tbody",null,[(c(!0),r(f,null,k(l.value.replyList,e=>(c(),r("tr",{key:e.rno},[t("td",null,o(e.rno),1),t("td",null,o(e.content),1),t("td",null,o(e.memberName)+"("+o(e.memberId)+")",1),t("td",null,o(b(g)(e).format("YYYY-MM-DD")),1),t("td",null,[e.memberId==b(a).id?(c(),r("span",at,[t("button",{class:"btn btn-close",onClick:R=>q(e.rno)},null,8,lt)])):w("",!0)])]))),128))])])],64))}},mt=N(nt,[["__scopeId","data-v-192c6d2a"]]);export{mt as default};
