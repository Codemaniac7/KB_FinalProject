import{b as g,c as m,r as w,d as y,j as x,o as u,e as p,f as a,h as s,t as f,w as c,v as d,g as k,k as V,l as N,i as S}from"./index-BBZxee2U.js";import{a as P}from"./authApi-DzoaphQ1.js";import"./index-BL4nKI-C.js";const B={class:"mt-5 mx-auto",style:{width:"500px"}},C=a("h1",null,[a("i",{class:"fa-solid fa-user-gear my-3"}),s(" 회원 정보")],-1),U={class:"mb-3 mt-3"},j={class:"mb-3 mt-3"},A=a("label",{for:"avatar",class:"form-label"},[a("i",{class:"fa-solid fa-user-astronaut"}),s(" 아바타 이미지: ")],-1),D={class:"mb-3 mt-3"},E=a("label",{for:"name",class:"form-label"},[a("i",{class:"fa-solid fa-circle-user"}),s(" name ")],-1),M={class:"mb-3 mt-3"},T=a("label",{for:"email",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),s(" email ")],-1),$={class:"mb-3"},q=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),s(" 비밀번호: ")],-1),z={key:0,class:"text-danger"},F={class:"text-center"},G=["disabled"],H=a("i",{class:"fa-solid fa-user-plus"},null,-1),I=a("i",{class:"fa-solid fa-lock"},null,-1),Q={__name:"ProfilePage",setup(J){const t=g(),r=m(null),_=`/api/member/${t.id}/avatar`,e=w({id:t.id,name:t.name,email:t.email,password:"",avatar:null}),i=m(""),v=y(()=>!e.email||!e.password),h=async()=>{if(r.value.files.length>0&&(e.avatar=r.value.files[0]),console.log(t),!!confirm("수정하시겠습니까?"))try{await P.update(e),i.value="",t.changeProfile(e),alert("정보를 수정하였습니다.")}catch(n){console.log(n),i.value=n.response.data}};return(n,o)=>{const b=x("router-link");return u(),p("div",B,[C,a("form",{onSubmit:S(h,["prevent"])},[a("div",U,[a("img",{src:_,class:"avatar avatar-lg me-4"}),s(" "+f(e.id),1)]),a("div",j,[A,a("input",{type:"file",class:"form-control",ref_key:"avatar",ref:r,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a("div",D,[E,c(a("input",{type:"text",class:"form-control",placeholder:"Name",id:"name","onUpdate:modelValue":o[0]||(o[0]=l=>e.name=l)},null,512),[[d,e.name]])]),a("div",M,[T,c(a("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":o[1]||(o[1]=l=>e.email=l)},null,512),[[d,e.email]])]),a("div",$,[q,c(a("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":o[2]||(o[2]=l=>e.password=l)},null,512),[[d,e.password]])]),i.value?(u(),p("div",z,f(i.value),1)):k("",!0),a("div",F,[a("button",{type:"submit",class:"btn btn-primary mt-4 me-3",disabled:v.value},[H,s(" 확인 ")],8,G),V(b,{class:"btn btn-primary mt-4",to:"/auth/changepassword"},{default:N(()=>[I,s(" 비밀번호 변경 ")]),_:1})])],32)])}}};export{Q as default};
